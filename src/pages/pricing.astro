---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import PricingCard from '../components/PricingCard.astro';
import PricingToggle from '../components/PricingToggle.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Pricing - CSMatic" description="Choose the perfect plan for your business. Start free, scale as you grow.">
  <Header />
  
  <main class="pt-24 relative bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20">
    <!-- Subtle gradient blobs in background -->
    <div class="absolute -top-24 -right-24 w-96 h-96 bg-gradient-to-br from-primary-300/10 via-purple-300/10 to-transparent rounded-full blur-3xl pointer-events-none"></div>
    <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-gradient-to-tr from-primary-300/10 via-blue-300/10 to-transparent rounded-full blur-3xl pointer-events-none"></div>
    
    <!-- Subtle dot pattern overlay -->
    <div class="absolute inset-0 opacity-[0.03] bg-[radial-gradient(#3b82f6_1px,transparent_1px)] [background-size:20px_20px] pointer-events-none"></div>
    
    <!-- Hero Section -->
    <section class="pt-10 pb-4 relative">
      <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16 relative z-10">
        <div class="text-center mb-4">
          <div class="inline-flex items-center px-4 py-2 rounded-full bg-primary-100/80 backdrop-blur-sm border border-primary-200/50 text-primary-700 text-sm font-medium mb-2">
            <svg class="w-3 h-3 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
            </svg>
            Transparent Pricing
          </div>
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-1">
            Simple, Transparent Pricing
          </h1>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
            Choose the perfect plan for your business. Start free, scale as you grow.
          </p>
        </div>
      </div>
    </section>
    
    <!-- Pricing Cards -->
    <section class="py-16 bg-white/80 backdrop-blur-sm relative z-10 rounded-t-3xl">
      <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16">
        <!-- Billing Toggle -->
        <PricingToggle />
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <PricingCard
            title="Free"
            price="Rp0"
            period="Forever"
            description=""
            features={[
              "20 message credits/month",
              "1 chatbot",
              "400,000 characters/chatbot",
              "10 links to train on",
              "Embed on unlimited websites",
              "Capture leads",
              "View chat history",
              "GPT-4o model"
            ]}
            ctaText="Get Started"
            ctaLink="/signup"
          />
          
          <PricingCard
            title="Hobby"
            price="Rp98k"
            period="/ Per Month"
            description=""
            features={[
              "Everything in Free, plus...",
              "2,000 message credits/month",
              "5 chatbots",
              "11,000,000 characters/chatbot",
              "Unlimited links to train on",
              "API access",
              "Integrations"
            ]}
            ctaText="Subscribe"
            ctaLink="/signup?plan=hobby"
          />
          
          <PricingCard
            title="Standard"
            price="Rp299k"
            period="/ Per Month"
            description=""
            features={[
              "Everything in Hobby, plus...",
              "10,000 message credits/month",
              "10 chatbots",
              "GPT-4 and GPT-4-Turbo options"
            ]}
            isPopular={true}
            ctaText="Subscribe"
            ctaLink="/signup?plan=standard"
          />
          
          <PricingCard
            title="Unlimited"
            price="Rp998k"
            period="/ Per Month"
            description=""
            features={[
              "Everything in Standard, plus...",
              "40,000 message credits/month",
              "15 chatbots",
              "Remove \"Powered by Chatbase\"",
              "Custom domains"
            ]}
            ctaText="Subscribe"
            ctaLink="/signup?plan=unlimited"
          />
        </div>
        
        <!-- Trust Indicators -->
        <div class="text-center mt-16">
          <p class="text-gray-600 mb-6 text-sm">Trusted by 10,000+ businesses worldwide</p>
          <div class="flex justify-center items-center space-x-4 opacity-50">
            <div class="bg-gray-200/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-gray-300/30 text-sm">Company A</div>
            <div class="bg-gray-200/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-gray-300/30 text-sm">Company B</div>
            <div class="bg-gray-200/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-gray-300/30 text-sm">Company C</div>
            <div class="bg-gray-200/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-gray-300/30 text-sm">Company D</div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Feature Comparison Table -->
    <section class="py-16 bg-gray-50/50">
      <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16">
        <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-900 mb-12">
          Compare Features
        </h2>
        
        <div class="relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-blue-400 to-purple-500 rounded-xl opacity-15"></div>
          <div class="relative bg-white/95 rounded-xl border border-blue-300/40 overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-50/80 backdrop-blur-sm">
                <tr>
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">Features</th>
                  <th class="px-4 py-3 text-center text-sm font-semibold text-gray-900">Free</th>
                  <th class="px-4 py-3 text-center text-sm font-semibold text-gray-900">Pro</th>
                  <th class="px-4 py-3 text-center text-sm font-semibold text-gray-900">Enterprise</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">Number of chatbots</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">1</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">5</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">Unlimited</td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">Monthly conversations</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">100</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">2,000</td>
                  <td class="px-4 py-3 text-center text-sm text-gray-600">Unlimited</td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">Custom branding</td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">Analytics dashboard</td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">API access</td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">Priority support</td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                </tr>
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">SSO & SAML</td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-red-500 font-bold">X</span>
                  </td>
                  <td class="px-4 py-3 text-center">
                    <span class="text-green-500 font-bold">✓</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<script is:inline>
  // Wait until DOM is fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Correct selector without escape character that causes errors
    const pricingToggle = document.querySelector('.relative.bg-gray-100');  
    const monthlyBtn = pricingToggle?.querySelector('button:first-child');
    const yearlyBtn = pricingToggle?.querySelector('button:last-child');
    const cards = document.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-3 > *');
    
    // Pricing and link data
    const pricingData = {
      monthly: [
        { price: "$0", period: "/month", link: "/signup" },
        { price: "$49", period: "/month", link: "/signup?plan=pro" },
        { price: "$199", period: "/month", link: "/contact" }
      ],
      yearly: [
        { price: "$0", period: "/year", link: "/signup?plan=free-yearly" },
        { price: "$39", period: "/year", link: "/signup?plan=pro-yearly" },
        { price: "$159", period: "/year", link: "/contact?plan=enterprise-yearly" }
      ]
    };
    
    // Function to change button appearance
    function setActiveButton(activeBtn, inactiveBtn) {
      activeBtn.className = "px-4 py-2 rounded-lg bg-white/90 text-gray-900 font-medium border border-gray-200/50 text-sm";
      inactiveBtn.className = "px-4 py-2 rounded-lg text-gray-600 font-medium text-sm";
    }
    
    // Function to switch to monthly
    function switchToMonthly() {
      setActiveButton(monthlyBtn, yearlyBtn);
      updatePricing('monthly');
    }
    
    // Function to switch to yearly
    function switchToYearly() {
      setActiveButton(yearlyBtn, monthlyBtn);
      updatePricing('yearly');
    }
    
    // Function to update prices and links
    function updatePricing(type) {
      cards.forEach((card, index) => {
        if (index < 3) {
          const data = pricingData[type][index];
          const priceEl = card.querySelector('h3');
          const periodEl = card.querySelector('span.text-gray-500');
          const linkEl = card.querySelector('a');
          
          if (priceEl) priceEl.textContent = data.price;
          if (periodEl) periodEl.textContent = data.period;
          if (linkEl) linkEl.href = data.link;
        }
      });
    }
    
    // Add event listeners
    if (monthlyBtn && yearlyBtn) {
      monthlyBtn.addEventListener('click', switchToMonthly);
      yearlyBtn.addEventListener('click', switchToYearly);
      
      // Set default to monthly
      switchToMonthly();
    }
  });
</script>